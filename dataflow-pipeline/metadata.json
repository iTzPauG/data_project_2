{
  "name": "Location Streaming Pipeline",
  "description": "Reads location data from Pub/Sub, checks zone matches, saves to Firestore, writes to BigQuery, and publishes to output topics.",
  "parameters": [
    {
      "name": "input_subscription",
      "label": "Input Pub/Sub subscription",
      "helpText": "Full Pub/Sub subscription path for incoming location data (projects/<project>/subscriptions/<subscription>).",
      "isOptional": false
    },
    {
      "name": "output_notifications_topic",
      "label": "Notifications Pub/Sub topic",
      "helpText": "Full Pub/Sub topic path for zone match notifications.",
      "isOptional": false
    },
    {
      "name": "project_id",
      "label": "GCP project ID",
      "helpText": "GCP project ID used for Firestore and BigQuery.",
      "isOptional": false
    },
    {
      "name": "firestore_database",
      "label": "Firestore database name",
      "helpText": "Firestore database name.",
      "isOptional": false
    },
    {
      "name": "firestore_collection",
      "label": "Firestore collection for locations",
      "helpText": "Firestore collection to store last user locations.",
      "isOptional": false
    },
    {
      "name": "firestore_notifications_collection",
      "label": "Firestore collection for notifications",
      "helpText": "Firestore collection to store last notification per user.",
      "isOptional": true,
      "defaultValue": "notifications"
    },
    {
      "name": "zones_sql",
      "label": "Zones SQL table",
      "helpText": "Cloud SQL table name for restricted zones.",
      "isOptional": true,
      "defaultValue": "zones"
    },
    {
      "name": "bq_dataset",
      "label": "BigQuery dataset ID",
      "helpText": "BigQuery dataset ID for location history.",
      "isOptional": false
    },
    {
      "name": "bq_table",
      "label": "BigQuery table name",
      "helpText": "BigQuery table name for location history.",
      "isOptional": false
    },
    {
      "name": "db_host",
      "label": "Cloud SQL host",
      "helpText": "Public IP address of the Cloud SQL instance.",
      "isOptional": false
    },
    {
      "name": "db_name",
      "label": "Cloud SQL database name",
      "helpText": "Name of the database within the Cloud SQL instance.",
      "isOptional": false
    },
    {
      "name": "db_user",
      "label": "Cloud SQL user",
      "helpText": "Username for the Cloud SQL database.",
      "isOptional": false
    },
    {
      "name": "db_pass",
      "label": "Cloud SQL password",
      "helpText": "Password for the Cloud SQL user.",
      "isOptional": false
    }
  ]
}
