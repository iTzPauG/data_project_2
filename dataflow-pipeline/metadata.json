{
  "name": "Location Streaming Pipeline",
  "description": "Reads location data from Pub/Sub, checks zone matches, saves to Firestore, writes to BigQuery, and publishes to output topics.",
  "parameters": [
    {
      "name": "input_subscription",
      "label": "Input Pub/Sub subscription (recommended)",
      "helpText": "Full Pub/Sub subscription path for incoming location data (projects/<project>/subscriptions/<subscription>). Recommended over topic for message durability.",
      "isOptional": true
    },
    {
      "name": "input_topic",
      "label": "Input Pub/Sub topic (deprecated)",
      "helpText": "Full Pub/Sub topic path for incoming location data (projects/<project>/topics/<topic>). Deprecated: use input_subscription instead to prevent message loss.",
      "isOptional": true
    },
    {
      "name": "output_notifications_topic",
      "label": "Notifications Pub/Sub topic",
      "helpText": "Full Pub/Sub topic path for zone match notifications.",
      "isOptional": false
    },
    {
      "name": "firestore_project",
      "label": "Firestore project ID",
      "helpText": "GCP project ID where Firestore resides.",
      "isOptional": false
    },
    {
      "name": "firestore_database",
      "label": "Firestore database name",
      "helpText": "Firestore database name.",
      "isOptional": false
    },
    {
      "name": "firestore_collection",
      "label": "Firestore collection for locations",
      "helpText": "Firestore collection to store last user locations.",
      "isOptional": false
    },
    {
      "name": "db_host",
      "label": "CloudSQL instance IP",
      "helpText": "CloudSQL instance public IP address.",
      "isOptional": false
    },
    {
      "name": "db_name",
      "label": "CloudSQL database name",
      "helpText": "CloudSQL database name (e.g., appdb).",
      "isOptional": false
    },
    {
      "name": "db_user",
      "label": "CloudSQL user name",
      "helpText": "CloudSQL database user name.",
      "isOptional": false
    },
    {
      "name": "db_pass",
      "label": "CloudSQL user password",
      "helpText": "CloudSQL database user password.",
      "isOptional": false
    },
    {
      "name": "bq_project",
      "label": "BigQuery project ID",
      "helpText": "GCP project ID for BigQuery.",
      "isOptional": false
    },
    {
      "name": "bq_dataset",
      "label": "BigQuery dataset ID",
      "helpText": "BigQuery dataset ID for location history.",
      "isOptional": false
    },
    {
      "name": "bq_table",
      "label": "BigQuery table name",
      "helpText": "BigQuery table name for location history.",
      "isOptional": false
    }
  ]
}
